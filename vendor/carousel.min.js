"use strict";

(function(u) {
    u.fn.circle = function(e) {
        var f = u.extend({
            speed: "5000",
            autoPlay: !1,
            delay: 2e3,
            dir: "left"
        }, e);
        return this.each(function() {
            function i() {
                var e = s.find("li.block.active").index();
                r.removeClass("active"), r.eq(e).addClass("active");
                var i = s.find("li.block.active").index() + 1, t = i - 1 == 0 ? "rotate" + s.find("li").length : "rotate" + (i - 1), a = "rotate" + i;
                s.parent().removeClass(t).addClass(a);
            }
            function e() {
                $(".bg-icon.abs img").attr("src", "img/svg/icon-" + function() {
                    switch (s.find("li.block.active").index() + 1) {
                      case 0:
                        return "media";

                      case 1:
                        return "digital";

                      case 2:
                        return "analysis";

                      case 3:
                        return "content";

                      case 4:
                        return "web";

                      case 5:
                        return "video";

                      default:
                        return "media";
                    }
                }() + ".svg"), s.addClass("disable-hover"), s.stop(!0, !0).animate({
                    rotatedeg: d.deg += d.step
                }, {
                    duration: 400,
                    step: function(e) {
                        360 <= e ? e -= 360 : e <= -360 && (e += 360), u(this).css("transform", "rotate(" + (e + 90) + "deg)"), 
                        u(this).css("-webkit-transform", "rotate(" + (e + 90) + "deg)");
                    },
                    complete: function() {
                        d.active = s.find("li.active").removeClass("active"), "right" == d.direction && d.step == l && (d.active.prev() && d.active.prev().length ? (d.active.prev().index(), 
                        d.active.prev().addClass("active")) : (d.active.siblings(":last-child").addClass("active"), 
                        9)), "left" == d.direction && d.step == c && (d.active.next() && d.active.next().length ? (d.active.next().index(), 
                        d.active.next().addClass("active")) : (d.active.siblings(":first-child").addClass("active"), 
                        0)), s.is(":animated"), s.removeClass("disable-hover"), i();
                    }
                }, "ease");
            }
            var s = u(this), t = s.find("li").length, a = s.find(" > li .icon"), n = "count" + t, c = 0, r = s.next().find(".animate"), d = {
                duration: f.speed,
                deg: 0,
                step: c,
                active: s.find("li.active"),
                direction: "left"
            };
            switch (t) {
              case 10:
                c = -36;
                break;

              case 9:
                c = -40;
                break;

              case 8:
                c = -45;
                break;

              case 7:
                c = -51.5;
                break;

              case 6:
                c = -60;
                break;

              case 5:
                c = -72;
                break;

              case 4:
                c = -90;
                break;

              case 3:
                c = -120;
                break;

              case 2:
                c = -180;
                break;

              case 1:
                c = -360;
            }
            s.addClass(n);
            var l = c - 2 * c;
            s.find("> li").first().addClass("active"), s.find("> li").first().find("a").attr("href"), 
            r.eq(0).addClass("active"), u(a).on("click", function() {
                var e = u(this).parent().index() - s.find("li.active").index();
                s.children("li").removeClass("active"), u(this).parent().addClass("active"), d.step = -e * l, 
                288 <= e * l && (d.step = -e * l + 360), e * l <= -288 && (d.step = -e * l - 360), 
                s.addClass("disable-hover"), s.stop(!0, !0).animate({
                    rotatedeg: d.deg += d.step
                }, {
                    duration: 400,
                    step: function(e) {
                        360 <= e ? e -= 360 : e <= -360 && (e += 360), u(this).css("transform", "rotate(" + (e + 90) + "deg)"), 
                        u(this).css("-webkit-transform", "rotate(" + (e + 90) + "deg)");
                    },
                    complete: function() {
                        d.active = s.find("li.active"), s.is(":animated"), s.removeClass("disable-hover"), 
                        $(".bg-icon.abs img").attr("src", "img/svg/icon-" + s.find("li.active").data("img") + ".svg");
                    }
                }, "ease"), d.step = c, d.direction = "left", i();
            });
            var o = s.parent().find("div.next"), v = s.parent().find("div.prev");
            if (o.on("click", function() {
                s.is(":animated") || (d.direction = "left", d.step = c, e());
            }), v.on("click", function() {
                s.is(":animated") || (d.direction = "right", d.step = l, e());
            }), f.autoPlay) setInterval(function() {
                if ("left" == f.dir) o.click(); else if ("right" == f.dir) v.click();
            }, f.delay);
        });
    };
})(jQuery);