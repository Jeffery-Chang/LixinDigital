/* jQuery tubular plugin
|* by Sean McCambridge
|* http://www.seanmccambridge.com/tubular
|* version: 1.0
|* updated: October 1, 2012
|* since 2010
|* licensed under the MIT License
|* Enjoy.
|* 
|* Thanks,
|* Sean */

(function(a,b){var c=0<b.innerWidth?b.innerWidth:screen.width,d={ratio:16/9,videoId:'ZCAnLxRvNNc',mute:!0,repeat:!0,width:a(b).width(),wrapperZIndex:99,playButtonClass:'tubular-play',pauseButtonClass:'tubular-pause',muteButtonClass:'tubular-mute',volumeUpClass:'tubular-volume-up',volumeDownClass:'tubular-volume-down',increaseVolumeBy:10,start:0,minimumSupportedWidth:600},f=function(i,j){var j=a.extend({},d,j),k=a('body');$node=a(i);a('html,body').css({width:'100%',height:'100%'}),k.prepend('<div id="tubular-container" style="overflow: hidden; position: fixed; z-index: -1; width: 100%; height: 100%"><div id="tubular-player" style="position: absolute"></div></div><div id="tubular-shield" style="width: 100%; height: 100%; z-index: -1; position: absolute; left: 0; top: 0;"></div>'),$node.css({position:'relative','z-index':j.wrapperZIndex}),b.player,b.onYouTubeIframeAPIReady=function(){player=new YT.Player('tubular-player',{width:j.width,height:Math.ceil(j.width/j.ratio),videoId:j.videoId,playerVars:{controls:0,showinfo:0,modestbranding:1,wmode:'transparent'},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})},b.onPlayerReady=function(n){m(),j.mute&&n.target.mute(),n.target.seekTo(j.start),n.target.setVolume(40),n.target.playVideo()},b.onPlayerStateChange=function(n){0===n.data&&j.repeat&&player.seekTo(j.start)};var m=function(){var o,q,n=a(b).width(),p=a(b).height(),r=a('#tubular-player');n/j.ratio<p?(o=Math.ceil(p*j.ratio),r.width(o).height(p).css({left:(n-o)/2,top:0})):(q=Math.ceil(n/j.ratio),r.width(n).height(q).css({left:0,top:(p-q)/2}))};a(b).on('resize.tubular',function(){m()}),a('body').on('click','.'+j.playButtonClass,function(n){n.preventDefault(),player.playVideo()}).on('click','.'+j.pauseButtonClass,function(n){n.preventDefault(),player.pauseVideo()}).on('click','.'+j.muteButtonClass,function(n){n.preventDefault(),player.isMuted()?player.unMute():player.mute()}).on('click','.'+j.volumeDownClass,function(n){n.preventDefault();var o=player.getVolume();o<j.increaseVolumeBy&&(o=j.increaseVolumeBy),player.setVolume(o-j.increaseVolumeBy)}).on('click','.'+j.volumeUpClass,function(n){n.preventDefault(),player.isMuted()&&player.unMute();var o=player.getVolume();o>100-j.increaseVolumeBy&&(o=100-j.increaseVolumeBy),player.setVolume(o+j.increaseVolumeBy)})},g=document.createElement('script');g.src='//www.youtube.com/iframe_api';var h=document.getElementsByTagName('script')[0];h.parentNode.insertBefore(g,h),a.fn.tubular=function(i){return this.each(function(){a.data(this,'tubular_instantiated')||a.data(this,'tubular_instantiated',f(this,i))})}})(jQuery,window);